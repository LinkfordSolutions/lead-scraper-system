# Lead Scraper System for Belarus 🇧🇾

Автоматическая система сбора и классификации лидов для бизнесов Беларуси.

## 🎯 Целевые ниши

1. СТО/детейлинг/шиномонтаж
2. Мастер на час / электрик / сантехник / бытовая техника
3. Клининговые услуги
4. Грузоперевозки/переезды
5. Учителя/репетиторы/курсы
6. Фитнес/йога/танцы/ЕМС-студии
7. Фото/видео-студии, фотографы
8. Нотариус/юристы/консалтинг
9. Психологи/коучи
10. Тату/перманент/пирсинг

## 📊 Источники данных

- **Яндекс Карты** - организации с контактами и рейтингами
- **2GIS** - подробная информация о бизнесах
- **Instagram** - активные коммерческие аккаунты (осторожно)
- **egr.gov.by** - официальный реестр МЮ Беларуси
- **onliner.by / deal.by** - белорусские площадки объявлений

## 🏗️ Архитектура

```
┌──────────────┐
│   PARSERS    │ → Сбор данных из источников
└──────┬───────┘
       ↓
┌──────────────┐
│  CLASSIFIER  │ → Автоматическая категоризация
└──────┬───────┘
       ↓
┌──────────────┐
│   DATABASE   │ → PostgreSQL хранилище
└──────┬───────┘
       ↓
┌──────────────┐
│ DEDUPLICATOR │ → Объединение дубликатов
└──────┬───────┘
       ↓
┌──────────────┐
│ CSV EXPORTER │ → Экспорт в CSV
└──────┬───────┘
       ↓
┌──────────────┐
│ TELEGRAM BOT │ → Доставка лидов
└──────────────┘
```

## 🚀 Установка

```bash
# Клонировать репозиторий
git clone https://github.com/LinkfordSolutions/lead-scraper-system.git
cd lead-scraper-system

# Создать виртуальное окружение
python3 -m venv venv
source venv/bin/activate

# Установить зависимости
pip install -r requirements.txt

# Настроить .env
cp .env.example .env
# Отредактировать .env с вашими токенами
```

## ⚙️ Конфигурация

Создайте файл `.env` на основе `.env.example`:

```env
# Telegram Bot
TELEGRAM_BOT_TOKEN=your_bot_token
BOT_PASSWORD=your_generated_password

# Database
DATABASE_URL=postgresql://user:password@localhost:5432/lead_scraper

# Scheduler
SCRAPING_SCHEDULE=daily
SCRAPING_TIME=03:00
```

## 📝 Использование

### Запуск системы

```bash
python main.py
```

### Telegram бот команды

- `/start` - Начало работы
- `/auth <password>` - Авторизация
- `/get_leads` - Получить последний CSV с лидами
- `/status` - Статус последнего парсинга

## 📦 Структура данных CSV

Экспортируемые поля:

- **Название компании**
- **Адрес**
- **Телефон**
- **Email**
- **Сайт**
- **Instagram**
- **Категория** (ниша)
- **Рейтинг**
- **Количество отзывов**
- **Координаты** (широта, долгота)
- **Район/Город**
- **Источник данных**
- **Дата обновления**

## 🔄 Автоматическое обновление

Система автоматически запускает парсинг **1 раз в день** в 03:00 по UTC.

После завершения парсинга:
1. Данные обрабатываются и дедуплицируются
2. Создается CSV файл
3. Файл автоматически отправляется всем авторизованным пользователям в Telegram

## 🛡️ Безопасность

- Доступ к боту защищен паролем
- Токены хранятся в `.env` (не коммитятся в git)
- Rate limiting для всех парсеров
- Proxy rotation для избежания блокировок

## 📊 Мониторинг

Логи доступны в директории `logs/`:
- `scraper.log` - основные операции парсинга
- `bot.log` - активность Telegram бота
- `errors.log` - ошибки системы

## 🤝 Поддержка

При возникновении проблем создайте issue в репозитории.

## 📄 Лицензия

Proprietary - LinkfordSolutions © 2025
